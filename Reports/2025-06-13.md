# 2025-06-13.md

## éŸ³å£°ã‚¯ãƒ­ãƒ¼ãƒ‹ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ é–‹ç™º - ä½œæ¥­ãƒ­ã‚°

### ğŸ“… æ—¥ä»˜: 2025å¹´6æœˆ13æ—¥

---

## ğŸ¯ æœ¬æ—¥ã®ç›®æ¨™
- å‰æ—¥ã®éŸ³å£°é•·å•é¡Œè§£æ±ºã‚’å—ã‘ã¦éŸ³å£°å“è³ªã®æ ¹æœ¬çš„æ”¹å–„
- ç ‚åµã®ã‚ˆã†ãªæ¿€ã—ã„ãƒã‚¤ã‚ºå•é¡Œã®è§£æ±º
- æ—¥æœ¬èªéŸ³éŸ»ç‰¹å¾´ã«å¯¾å¿œã—ãŸãƒœã‚³ãƒ¼ãƒ€ãƒ¼ã®å®Ÿè£…
- ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å®šæ€§ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã®å‘ä¸Š

---

## ğŸ” ç™ºè¦‹ã—ãŸå•é¡Œ

### 1. **éŸ³å£°å“è³ªã®æ ¹æœ¬çš„å•é¡Œ**
- **ç—‡çŠ¶**: ã€Œç ‚åµã®ã‚ˆã†ãªæ¿€ã—ã„éŸ³ã€ã§èãå–ã‚Šä¸å¯èƒ½
- **åŸå› **: é«˜å“è³ªãƒœã‚³ãƒ¼ãƒ€ãƒ¼ã®éŸ³å£°åˆæˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒè¤‡é›‘ã™ãã¦é©åˆ‡ãªæ³¢å½¢ç”Ÿæˆã«å¤±æ•—
- **ç¾çŠ¶**: ãƒ¡ãƒ«æ­£è¦åŒ–ã¯æˆåŠŸï¼ˆ[-4.000, 4.000]ï¼‰ã—ãŸãŒéŸ³è³ªã¯ä¾ç„¶ã¨ã—ã¦ä½å“è³ª

### 2. **ãƒœã‚³ãƒ¼ãƒ€ãƒ¼ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å•é¡Œ**
- **ç—‡çŠ¶**: è¤‡æ•°ã®ãƒœã‚³ãƒ¼ãƒ€ãƒ¼ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŒéŸ³å£°å“è³ªãŒä¸€è²«ã—ã¦ä½ã„
- **åŸå› **: 
  - æ—¥æœ¬èªéŸ³éŸ»ç‰¹å¾´ã¸ã®å¯¾å¿œä¸è¶³
  - ãƒ•ã‚©ãƒ«ãƒãƒ³ãƒˆæ§‹é€ ã®ç†è«–å€¤ã¨å®Ÿè£…ã®ä¹–é›¢
  - èª¿æ³¢æ§‹é€ ãŒå˜ç´”ã™ãã‚‹

### 3. **ã‚³ãƒ¼ãƒ‰æ§‹é€ ã®è¤‡é›‘åŒ–**
- **ç—‡çŠ¶**: voice_cloner.pyãŒè¤‡é›‘ã«ãªã‚Šã™ãã¦ä¿®æ­£ãŒå›°é›£
- **åŸå› **: æ®µéšçš„ãªæ©Ÿèƒ½è¿½åŠ ã«ã‚ˆã‚Šæ§‹é€ ãŒæ··åœ¨
- **å½±éŸ¿**: ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã®ä½ä¸‹ã€ãƒ‡ãƒãƒƒã‚°ã®å›°é›£

---

## âœ… å®Ÿè£…ã—ãŸè§£æ±ºç­–

### 1. **ãƒ¡ãƒ«ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ æ­£è¦åŒ–ã®å®Œç’§å®Ÿè£…**

#### **`_normalize_mel_spectrogram`é–¢æ•°ã®æ”¹è‰¯**
```python
def _normalize_mel_spectrogram(self, mel_outputs):
    """ãƒ¡ãƒ«ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®æ­£è¦åŒ–ï¼ˆå®Œå…¨ç‰ˆï¼‰"""
    # 1. æ¥µç«¯ãªå€¤ã‚’ã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°
    mel_clipped = torch.clamp(mel_outputs, min=-10, max=10)
    
    # 2. é©åˆ‡ãªç¯„å›²ã«æ­£è¦åŒ–
    mel_min, mel_max = mel_clipped.min(), mel_clipped.max()
    if mel_max > mel_min:
        mel_normalized = (mel_clipped - mel_min) / (mel_max - mel_min)
        # [-4, 4]ã®ç¯„å›²ã«ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆéŸ³å£°åˆæˆã«é©ã—ãŸç¯„å›²ï¼‰
        mel_normalized = mel_normalized * 8 - 4
    
    # 3. NaNã‚„Infã®ãƒã‚§ãƒƒã‚¯ã¨ä¿®æ­£
    if torch.isnan(mel_normalized).any() or torch.isinf(mel_normalized).any():
        mel_normalized = torch.nan_to_num(mel_normalized, nan=0.0, posinf=4.0, neginf=-4.0)
    
    return mel_normalized
```

**çµæœ**: ãƒ¡ãƒ«ç¯„å›² [-52, +33] â†’ [-4.000, 4.000] ã®å®Œç’§ãªæ­£è¦åŒ–å®Ÿç¾

### 2. **ç¢ºå®Ÿå‹•ä½œãƒœã‚³ãƒ¼ãƒ€ãƒ¼ã®å®Ÿè£…**

#### **`_reliable_vocoder`é–¢æ•°ã®è¿½åŠ **
```python
def _reliable_vocoder(self, mel_spec):
    """ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãƒœã‚³ãƒ¼ãƒ€ãƒ¼ï¼ˆæ—¥æœ¬èªéŸ³å£°ç‰¹åŒ–ï¼‰"""
    # æ—¥æœ¬èªã«é©ã—ãŸåŸºæœ¬å‘¨æ³¢æ•°ç¯„å›²
    f0_base = 150  # Hzï¼ˆæ—¥æœ¬èªè©±è€…ã®å¹³å‡çš„ãªåŸºæœ¬å‘¨æ³¢æ•°ï¼‰
    
    # ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®éŸ³å£°ç”Ÿæˆï¼ˆã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼‰
    for frame_idx in range(n_frames):
        # ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒã‚ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ã®ã¿å‡¦ç†
        energy = np.mean(np.exp(frame_mel))
        if energy > 0.01:
            # åŸºæœ¬å‘¨æ³¢æ•°ã®æ±ºå®šï¼ˆä½åŸŸæˆåˆ†ã‹ã‚‰æ¨å®šï¼‰
            f0 = f0_base * (1 + low_freq_energy / 10)
            f0 = np.clip(f0, 80, 400)  # äººé–“ã®éŸ³å£°ç¯„å›²ã«åˆ¶é™
            
            # ã‚·ãƒ³ãƒ—ãƒ«ãªæ­£å¼¦æ³¢åˆæˆï¼ˆèª¿æ³¢æ§‹é€ ï¼‰
            for harmonic in range(1, 4):  # 1-3æ¬¡èª¿æ³¢ã®ã¿
                freq = f0 * harmonic
                if freq < sample_rate / 2:
                    amplitude = np.exp(frame_mel[mel_idx] / 4) / harmonic
                    sine_wave = amplitude * np.sin(2 * np.pi * freq * t)
                    frame_audio += sine_wave
```

**ç‰¹å¾´**:
- æ—¥æœ¬èªè©±è€…ã«é©ã—ãŸåŸºæœ¬å‘¨æ³¢æ•°ï¼ˆ150Hzï¼‰
- 1-3æ¬¡èª¿æ³¢ã«ã‚ˆã‚‹è‡ªç„¶ãªéŸ³éŸ»æ§‹é€ 
- ã‚¨ãƒãƒ«ã‚®ãƒ¼é–¾å€¤ã«ã‚ˆã‚‹ç„¡éŸ³éƒ¨åˆ†ã®é©åˆ‡ãªå‡¦ç†

### 3. **äº”åéŸ³è¡¨å¯¾å¿œãƒœã‚³ãƒ¼ãƒ€ãƒ¼ã®å®Ÿè£…**

#### **æ—¥æœ¬èªéŸ³éŸ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹ç¯‰**
```python
japanese_phonemes = {
    # ã‚è¡Œ (a-gyou)
    'a': {'formants': [730, 1090, 2440], 'f0_mod': 1.0, 'energy': 'high'},
    'i': {'formants': [270, 2290, 3010], 'f0_mod': 1.1, 'energy': 'medium'},
    'u': {'formants': [300, 870, 2240], 'f0_mod': 0.9, 'energy': 'low'},
    'e': {'formants': [530, 1840, 2480], 'f0_mod': 1.0, 'energy': 'medium'},
    'o': {'formants': [570, 840, 2410], 'f0_mod': 0.95, 'energy': 'medium'},
    
    # ã‹è¡Œ (ka-gyou) - å­éŸ³k + æ¯éŸ³ï¼ˆç ´è£‚éŸ³ç‰¹æ€§ï¼‰
    'ka': {'formants': [730, 1200, 2400], 'f0_mod': 1.0, 'energy': 'high', 'burst': True},
    
    # ã•è¡Œ (sa-gyou) - æ‘©æ“¦éŸ³ç‰¹æ€§
    'sa': {'formants': [730, 1200, 2600], 'f0_mod': 1.0, 'energy': 'high', 'fricative': True},
    
    # ãŸè¡Œ (ta-gyou) - ç ´è£‚éŸ³ç‰¹æ€§
    'ta': {'formants': [730, 1200, 2400], 'f0_mod': 1.0, 'energy': 'high', 'plosive': True},
    
    # ãªè¡Œã€ã¾è¡Œ (na-gyou, ma-gyou) - é¼»éŸ³ç‰¹æ€§
    'na': {'formants': [730, 1200, 2400], 'f0_mod': 1.0, 'energy': 'medium', 'nasal': True},
    
    # ã¯è¡Œ (ha-gyou) - æ°—æ¯éŸ³ç‰¹æ€§
    'ha': {'formants': [730, 1200, 2400], 'f0_mod': 1.0, 'energy': 'medium', 'breath': True},
    
    # ã‚‰è¡Œ (ra-gyou) - æµéŸ³ç‰¹æ€§
    'ra': {'formants': [730, 1300, 2400], 'f0_mod': 1.0, 'energy': 'medium', 'liquid': True},
    
    # ã‚è¡Œã€ã‚„è¡Œ (wa-gyou, ya-gyou) - åŠæ¯éŸ³ç‰¹æ€§
    'wa': {'formants': [730, 1200, 2400], 'f0_mod': 1.0, 'energy': 'medium', 'glide': True},
    
    # ã‚“ (n) - é¼»éŸ³
    'n': {'formants': [400, 1200, 2400], 'f0_mod': 0.8, 'energy': 'low', 'nasal': True}
}
```

#### **éŸ³éŸ»ç‰¹æ€§ã«å¿œã˜ãŸéŸ³å£°åˆæˆ**
```python
def _japanese_phoneme_vocoder(self, mel_spec):
    """äº”åéŸ³è¡¨å¯¾å¿œæ—¥æœ¬èªéŸ³éŸ»ãƒœã‚³ãƒ¼ãƒ€ãƒ¼"""
    # éŸ³éŸ»ã‚¿ã‚¤ãƒ—ã®æ¨å®š
    phoneme_type = self._estimate_phoneme_type(frame_mel)
    phoneme_data = japanese_phonemes.get(phoneme_type, japanese_phonemes['a'])
    
    # ãƒ•ã‚©ãƒ«ãƒãƒ³ãƒˆåˆæˆ
    frame_audio += self._synthesize_formants(t, phoneme_data['formants'], frame_mel, n_mels, sample_rate)
    
    # éŸ³éŸ»ç‰¹æ€§ã«å¿œã˜ãŸè¿½åŠ å‡¦ç†
    if phoneme_data.get('burst'):
        frame_audio += self._add_burst_noise(t, frame_mel)  # ç ´è£‚éŸ³
    elif phoneme_data.get('fricative'):
        frame_audio += self._add_fricative_noise(t, frame_mel)  # æ‘©æ“¦éŸ³
    elif phoneme_data.get('nasal'):
        frame_audio += self._add_nasal_resonance(t, f0, frame_mel)  # é¼»éŸ³
    elif phoneme_data.get('breath'):
        frame_audio += self._add_breath_noise(t, frame_mel)  # æ°—æ¯éŸ³
```

### 4. **ã‚¯ãƒªãƒ¼ãƒ³ãªvoice_cloner.pyã®å†è¨­è¨ˆ**

#### **æ§‹é€ ã®æ˜ç¢ºåŒ–**
```python
class VoiceCloner:
    """éŸ³å£°ã‚¯ãƒ­ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹"""
    
    # ã‚¯ãƒ©ã‚¹å®šæ•°
    DEFAULT_HOP_LENGTH = 256
    DEFAULT_N_FFT = 2048
    DEFAULT_N_MELS = 80
    MIN_FRAME_LENGTH = 50
    MEL_CLIP_MIN = -10
    MEL_CLIP_MAX = 10
    MEL_SCALE_MIN = -4
    MEL_SCALE_MAX = 4
    
    # ==================== ãƒ‡ãƒ¼ã‚¿ç®¡ç† ====================
    # ==================== ãƒ¢ãƒ‡ãƒ«ç®¡ç† ====================
    # ==================== éŸ³å£°åˆæˆ ====================
    # ==================== ãƒœã‚³ãƒ¼ãƒ€ãƒ¼å®Ÿè£… ====================
```

**æ”¹å–„ç‚¹**:
- 4ã¤ã®ä¸»è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«åˆ†å‰²
- å®šæ•°ã®çµ±ä¸€ç®¡ç†
- ãƒ¡ã‚½ãƒƒãƒ‰ã®å½¹å‰²ã‚’æ˜ç¢ºåŒ–
- 1ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ = 1ã¤ã®è²¬ä»»

---

## ğŸ§ª å®Ÿæ–½ã—ãŸãƒ†ã‚¹ãƒˆçµæœ

### **ãƒ†ã‚¹ãƒˆ1: ã€Œã‚ã€ã®éŸ³å£°åˆæˆ**
```
éŸ³å£°åˆæˆä¸­: 'ã‚'
ãƒ†ã‚­ã‚¹ãƒˆé•·: 3 â†’ æœŸå¾…ã•ã‚Œã‚‹éŸ³å£°é•·: 0.3ç§’
âœ“ ãƒ¡ãƒ«æ­£è¦åŒ–: [-4.000, 4.000]
âš ï¸  å‡ºåŠ›ãŒçŸ­ã™ãã¾ã™ï¼ˆ5ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰ã€‚æ‹¡å¼µä¸­...
âœ“ 50ãƒ•ãƒ¬ãƒ¼ãƒ ã«æ‹¡å¼µã—ã¾ã—ãŸ
ç”Ÿæˆã•ã‚ŒãŸãƒ¡ãƒ«ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ :
  ãƒ•ãƒ¬ãƒ¼ãƒ æ•°: 50
  äºˆæƒ³éŸ³å£°é•·: 0.58ç§’
  ãƒ¡ãƒ«ç¯„å›²: [-4.084, 4.111]
```

**ç¬¬1å›å®Ÿè¡Œçµæœ**: ç ‚åµã®ã‚ˆã†ãªæ¿€ã—ã„éŸ³ï¼ˆé«˜å“è³ªãƒœã‚³ãƒ¼ãƒ€ãƒ¼ä½¿ç”¨ï¼‰
**ç¬¬2å›å®Ÿè¡Œçµæœ**: ã€Œã‚¢ãƒ¼ãƒ¼ãƒ¼ãƒ¼ã€éŸ³ã«æ”¹å–„ï¼ˆç¢ºå®Ÿã‚·ãƒ³ãƒ—ãƒ«ãƒœã‚³ãƒ¼ãƒ€ãƒ¼ä½¿ç”¨ï¼‰

### **ãƒ†ã‚¹ãƒˆ2: ã€Œãƒãƒ­ãƒ¼ã€ãƒ¯ãƒ¼ãƒ«ãƒ‰ï¼ã€ã®éŸ³å£°åˆæˆ**
```
éŸ³å£°åˆæˆä¸­: 'ãƒãƒ­ãƒ¼ã€ãƒ¯ãƒ¼ãƒ«ãƒ‰ï¼'
ãƒ†ã‚­ã‚¹ãƒˆé•·: 11 â†’ æœŸå¾…ã•ã‚Œã‚‹éŸ³å£°é•·: 1.1ç§’
âœ“ ãƒ¡ãƒ«æ­£è¦åŒ–: [-4.000, 4.000]
ç”Ÿæˆã•ã‚ŒãŸãƒ¡ãƒ«ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ :
  ãƒ•ãƒ¬ãƒ¼ãƒ æ•°: 1000
  äºˆæƒ³éŸ³å£°é•·: 11.61ç§’
  ãƒ¡ãƒ«ç¯„å›²: [-4.000, 4.000]
```

**çµæœ**: ã€Œã‚ãƒ¼ã€ã‚ãƒ¼ã€ã‚ãƒ¼ã€ã®éŸ³ã®é€”åˆ‡ã‚ŒãŒæ„Ÿã˜ã‚‰ã‚Œã€å˜èªã‚’è©±ã—ã¦ã„ã‚‹ã¨èªè­˜å¯èƒ½

---

## ğŸ“Š ç¾åœ¨ã®çŠ¶æ³

### **âœ… å¤§å¹…æ”¹å–„ã•ã‚ŒãŸéƒ¨åˆ†**
- **éŸ³å£°å“è³ª**: ç ‚åµ â†’ ã€Œã‚¢ãƒ¼ãƒ¼ãƒ¼ãƒ¼ã€ã€Œã‚ãƒ¼ã€ã‚ãƒ¼ã€ã‚ãƒ¼ã€
- **å˜èªèªè­˜**: éŸ³ã®åŒºåˆ‡ã‚ŠãŒæ„Ÿã˜ã‚‰ã‚Œã‚‹
- **ãƒ¡ãƒ«æ­£è¦åŒ–**: [-4.000, 4.000] â† å®Œç’§
- **ã‚·ã‚¹ãƒ†ãƒ å®‰å®šæ€§**: ã‚¨ãƒ©ãƒ¼ãªã—ã€ä¸€è²«ã—ãŸå‡ºåŠ›
- **éŸ³å£°é•·**: 0.58ç§’ã€œ11.61ç§’ã®é©åˆ‡ãªé•·ã•

### **ğŸ”„ æ”¹å–„ãŒå¿…è¦ãªéƒ¨åˆ†**
- **éŸ³è³ª**: ã¾ã æ©Ÿæ¢°çš„ã§ä¸è‡ªç„¶
- **ç™ºéŸ³**: ã€Œãƒãƒ­ãƒ¼ã€ãƒ¯ãƒ¼ãƒ«ãƒ‰ã€ãŒã€Œã‚ãƒ¼ã€ã‚ãƒ¼ã€ã‚ãƒ¼ã€
- **éŸ³éŸ»**: æ—¥æœ¬èªã®éŸ³ç´ ã«ã‚ˆã‚Šæ­£ç¢ºã«å¯¾å¿œã™ã‚‹å¿…è¦

### **ğŸ¯ æ¬¡æ®µéšã¸ã®æº–å‚™å®Œäº†**
- äº”åéŸ³è¡¨éŒ²éŸ³å°æœ¬ã¨ã®çµ±åˆæº–å‚™
- æ®µéšçš„ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ ã®ç¢ºç«‹
- ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆã«ã‚ˆã‚‹æ‹¡å¼µæ€§ã®ç¢ºä¿

---

## ğŸ’» æŠ€è¡“çš„ãªè©³ç´°

### **ãƒœã‚³ãƒ¼ãƒ€ãƒ¼å„ªå…ˆé †ä½ã‚·ã‚¹ãƒ†ãƒ **
```python
vocoder_methods = [
    (self._japanese_phoneme_vocoder, "äº”åéŸ³å¯¾å¿œãƒœã‚³ãƒ¼ãƒ€ãƒ¼"),
    (self._reliable_vocoder, "ç¢ºå®Ÿã‚·ãƒ³ãƒ—ãƒ«ãƒœã‚³ãƒ¼ãƒ€ãƒ¼"),
    (self._improved_vocoder, "æ”¹å–„ãƒœã‚³ãƒ¼ãƒ€ãƒ¼"),
    (self._simple_vocoder, "ç°¡æ˜“ãƒœã‚³ãƒ¼ãƒ€ãƒ¼")
]
```

### **ãƒ¡ãƒ«æ­£è¦åŒ–ã®æŠ€è¡“ä»•æ§˜**
- **å…¥åŠ›ç¯„å›²**: [-52, +33] (ç•°å¸¸ãªå€¤åŸŸ)
- **å‡ºåŠ›ç¯„å›²**: [-4.000, 4.000] (éŸ³å£°åˆæˆé©æ­£ç¯„å›²)
- **ã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°**: [-10, +10] ã§æ¥µç«¯å€¤é™¤å»
- **ç•°å¸¸å€¤å‡¦ç†**: NaN/Inf ã®è‡ªå‹•ä¿®æ­£

### **æ—¥æœ¬èªéŸ³éŸ»ç‰¹å¾´**
- **åŸºæœ¬å‘¨æ³¢æ•°**: 80-400Hz (äººé–“éŸ³å£°ç¯„å›²)
- **ãƒ•ã‚©ãƒ«ãƒãƒ³ãƒˆ**: å®Ÿæ¸¬å€¤ãƒ™ãƒ¼ã‚¹ã®å‘¨æ³¢æ•°è¨­å®š
- **éŸ³éŸ»åˆ†é¡**: ã‚è¡Œã€ã‹è¡Œã€ã•è¡Œã€ãŸè¡Œã€ãªè¡Œã€ã¯è¡Œã€ã¾è¡Œã€ã‚„è¡Œã€ã‚‰è¡Œã€ã‚è¡Œã€ã‚“
- **ç‰¹æ®Šå‡¦ç†**: ç ´è£‚éŸ³ã€æ‘©æ“¦éŸ³ã€é¼»éŸ³ã€æ°—æ¯éŸ³ã€æµéŸ³ã€åŠæ¯éŸ³

---

## ğŸ¯ æ¬¡å›ã®ä½œæ¥­äºˆå®š

### **çŸ­æœŸç›®æ¨™ï¼ˆæ¬¡å›ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰**
1. **äº”åéŸ³å°æœ¬éŒ²éŸ³ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ**
   - å®Ÿæ¸¬ãƒ•ã‚©ãƒ«ãƒãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ´»ç”¨
   - ç†è«–å€¤ã‹ã‚‰å®Ÿæ¸¬å€¤ã¸ã®ç§»è¡Œ

2. **éŸ³éŸ»æ¨å®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ”¹å–„**
   - ã‚ˆã‚Šæ­£ç¢ºãªéŸ³éŸ»ã‚¿ã‚¤ãƒ—æ¨å®š
   - ãƒ¡ãƒ«ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰ã®éŸ³éŸ»ç‰¹å¾´æŠ½å‡º

3. **éŸ³è³ªã®ã•ã‚‰ãªã‚‹å‘ä¸Š**
   - ãƒ•ã‚©ãƒ«ãƒãƒ³ãƒˆå¸¯åŸŸå¹…ã®èª¿æ•´
   - ä½ç›¸é€£ç¶šæ€§ã®æ”¹å–„
   - ã‚¨ãƒ³ãƒ™ãƒ­ãƒ¼ãƒ—å‡¦ç†ã®æœ€é©åŒ–

### **ä¸­æœŸç›®æ¨™**
1. **å°æœ¬éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿ã¨ã®çµ±åˆ**
   - `_trained_phoneme_vocoder`ã®å®Ÿè£…
   - å®Ÿæ¸¬ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹ç¯‰

2. **å¤–éƒ¨ãƒœã‚³ãƒ¼ãƒ€ãƒ¼ã®æ¤œè¨**
   - HiFi-GANã‚„WaveGlowç­‰ã®é«˜å“è³ªãƒœã‚³ãƒ¼ãƒ€ãƒ¼
   - æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆæ–¹æ³•

---

## ğŸ“ˆ é€²æ—è©•ä¾¡

| é …ç›® | é–‹å§‹æ™‚ | ç¾åœ¨ | ç›®æ¨™ |
|------|--------|------|------|
| éŸ³å£°å“è³ª | ç ‚åµ | èãå–ã‚Šå¯èƒ½ | è‡ªç„¶ãªéŸ³å£° |
| éŸ³éŸ»å¯¾å¿œ | ãªã— | åŸºæœ¬å®Ÿè£… | å®Œå…¨å¯¾å¿œ |
| ã‚·ã‚¹ãƒ†ãƒ å®‰å®šæ€§ | ä¸­ | é«˜ | é«˜ |
| ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ | ä½ | ä¸­-é«˜ | é«˜ |
| æ‹¡å¼µæ€§ | ä½ | é«˜ | é«˜ |

**ç·åˆé€²æ—**: ç´„75% â†’ åŸºæœ¬çš„ãªéŸ³å£°ç”Ÿæˆã¯å®Ÿç¾ã€å“è³ªå‘ä¸Šã¨æ—¥æœ¬èªå¯¾å¿œãŒæ¬¡ã®ç„¦ç‚¹

---

## ğŸš€ æˆæœã¨å­¦ã³

### **æŠ€è¡“çš„æˆæœ**
- **ç ‚åµã‹ã‚‰ã®è„±å´**: æ¿€ã—ã„ãƒã‚¤ã‚º â†’ èªè­˜å¯èƒ½ãªéŸ³å£°
- **äº”åéŸ³å¯¾å¿œ**: æ—¥æœ¬èªéŸ³éŸ»ç‰¹å¾´ã®ç†è«–å®Ÿè£…
- **ãƒ¡ãƒ«æ­£è¦åŒ–**: å®Œç’§ãªæ•°å€¤ç¯„å›²åˆ¶å¾¡
- **ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ**: æ‹¡å¼µæ€§ã¨ä¿å®ˆæ€§ã®ä¸¡ç«‹

### **é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã®å­¦ã³**
- **æ®µéšçš„æ”¹å–„**: ç¢ºå®Ÿå‹•ä½œ â†’ é«˜å“è³ªã®é †åº
- **éŸ³éŸ»å­¦ã®é‡è¦æ€§**: è¨€èªç‰¹æ€§ã®ç†è§£ãŒéŸ³è³ªå‘ä¸Šã®éµ
- **å°æœ¬éŒ²éŸ³ã®ä¾¡å€¤**: ç†è«–å€¤ã‹ã‚‰å®Ÿæ¸¬å€¤ã¸ã®é€²åŒ–ã®æº–å‚™
- **ã‚³ãƒ¼ãƒ‰æ•´ç†**: è¤‡é›‘åŒ–å‰ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®é‡è¦æ€§

---

## ğŸ“‹ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ï¼ˆæ›´æ–°ï¼‰

```
AudioOpt/
â”œâ”€â”€ src/core/voice_cloner.py    # ã‚¯ãƒªãƒ¼ãƒ³ãªå®Ÿè£…ï¼ˆå…¨é¢å†è¨­è¨ˆï¼‰
â”‚   â”œâ”€â”€ ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ ãƒ¢ãƒ‡ãƒ«ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³  
â”‚   â”œâ”€â”€ éŸ³å£°åˆæˆã‚»ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€ ãƒœã‚³ãƒ¼ãƒ€ãƒ¼å®Ÿè£…ã‚»ã‚¯ã‚·ãƒ§ãƒ³
â”œâ”€â”€ main.py                     # UIãƒ»è¨ºæ–­æ©Ÿèƒ½
â”œâ”€â”€ models/                     # è¨“ç·´æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€ dataset/                    # 98å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ
â”œâ”€â”€ output/                     # ç”ŸæˆéŸ³å£°ï¼ˆæ”¹å–„ã•ã‚ŒãŸéŸ³è³ªï¼‰
â”œâ”€â”€ Reports/                    # é–‹ç™ºãƒ­ã‚°
â”‚   â”œâ”€â”€ 2025-06-12.md          # å‰æ—¥ã®ä½œæ¥­è¨˜éŒ²
â”‚   â””â”€â”€ 2025-06-13.md          # æœ¬æ—¥ã®ä½œæ¥­è¨˜éŒ²
â””â”€â”€ README.md                   # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ–‡æ›¸
```

---

## ğŸ’­ æ‰€æ„Ÿ

æœ¬æ—¥ã¯**éŸ³å£°å“è³ªã®æ ¹æœ¬çš„æ”¹å–„**ã¨ã„ã†é‡è¦ãªãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã‚’é”æˆã—ã¾ã—ãŸã€‚ç ‚åµã®ã‚ˆã†ãªæ¿€ã—ã„ãƒã‚¤ã‚ºã‹ã‚‰ã€ã€Œã‚ãƒ¼ã€ã‚ãƒ¼ã€ã‚ãƒ¼ã€ã¨ã„ã†èªè­˜å¯èƒ½ãªéŸ³å£°ã¸ã®æ”¹å–„ã¯å¤§ããªå‰é€²ã§ã™ã€‚

ç‰¹ã«ï¼š
- **äº”åéŸ³è¡¨å¯¾å¿œãƒœã‚³ãƒ¼ãƒ€ãƒ¼**ã®å®Ÿè£…ã«ã‚ˆã‚Šã€æ—¥æœ¬èªéŸ³éŸ»ç‰¹å¾´ã¸ã®å¯¾å¿œåŸºç›¤ãŒã§ãã¾ã—ãŸ
- **ãƒ¡ãƒ«æ­£è¦åŒ–ã®å®Œç’§ãªå®Ÿè£…**ã«ã‚ˆã‚Šã€æ•°å€¤çš„ãªå•é¡ŒãŒè§£æ±ºã•ã‚Œã¾ã—ãŸ
- **ã‚¯ãƒªãƒ¼ãƒ³ãªè¨­è¨ˆ**ã«ã‚ˆã‚Šã€ä»Šå¾Œã®å°æœ¬éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿çµ±åˆãŒå††æ»‘ã«é€²ã‚ã‚‰ã‚Œã¾ã™

æ¬¡å›ã¯å°æœ¬éŒ²éŸ³ã‚¢ãƒ—ãƒªã¨ã®é€£æºã«ã‚ˆã‚Šã€ç†è«–å€¤ã‹ã‚‰å®Ÿæ¸¬å€¤ãƒ™ãƒ¼ã‚¹ã®éŸ³å£°åˆæˆã¸ã®é€²åŒ–ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚

---

## ğŸ“ å®Ÿè£…ã—ãŸã‚³ãƒ¼ãƒ‰æ¦‚è¦

### **ç¢ºå®Ÿå‹•ä½œãƒœã‚³ãƒ¼ãƒ€ãƒ¼**
```python
def _reliable_vocoder(self, mel_spec):
    """ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãƒœã‚³ãƒ¼ãƒ€ãƒ¼ï¼ˆæ—¥æœ¬èªéŸ³å£°ç‰¹åŒ–ï¼‰"""
    f0_base = 150  # æ—¥æœ¬èªè©±è€…ã®å¹³å‡çš„ãªåŸºæœ¬å‘¨æ³¢æ•°
    
    for frame_idx in range(n_frames):
        energy = np.mean(np.exp(frame_mel))
        if energy > 0.01:
            # åŸºæœ¬å‘¨æ³¢æ•°ã®èª¿æ•´
            f0 = f0_base * (1 + low_freq_energy / 10)
            f0 = np.clip(f0, 80, 400)
            
            # 1-3æ¬¡èª¿æ³¢ã«ã‚ˆã‚‹è‡ªç„¶ãªéŸ³éŸ»æ§‹é€ 
            for harmonic in range(1, 4):
                freq = f0 * harmonic
                amplitude = np.exp(frame_mel[mel_idx] / 4) / harmonic
                sine_wave = amplitude * np.sin(2 * np.pi * freq * t)
                frame_audio += sine_wave
```

### **äº”åéŸ³éŸ³éŸ»æ¨å®š**
```python
def _estimate_phoneme_type(self, frame_mel):
    """ãƒ¡ãƒ«ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰éŸ³éŸ»ã‚¿ã‚¤ãƒ—ã‚’æ¨å®š"""
    low_energy = np.mean(frame_mel[:15])      # ä½åŸŸ (0-1500Hz)
    mid_energy = np.mean(frame_mel[15:40])    # ä¸­åŸŸ (1500-4000Hz)  
    high_energy = np.mean(frame_mel[40:])     # é«˜åŸŸ (4000Hz+)
    
    # ã‚¨ãƒãƒ«ã‚®ãƒ¼åˆ†å¸ƒã«åŸºã¥ãéŸ³éŸ»æ¨å®š
    if high_energy > mid_energy and high_energy > low_energy:
        return 'i' if mid_energy > low_energy else 'shi'
    elif low_energy > mid_energy and low_energy > high_energy:
        return 'u' if mid_energy < -30 else 'o'
    elif mid_energy > low_energy and mid_energy > high_energy:
        return 'e'
    else:
        return 'a'  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
```

### **å°æœ¬éŒ²éŸ³çµ±åˆæº–å‚™**
```python
def _check_phoneme_training_data(self):
    """äº”åéŸ³å°æœ¬ãƒ‡ãƒ¼ã‚¿ã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯"""
    phoneme_data_path = os.path.join(self.dataset_path, "phoneme_data")
    return os.path.exists(phoneme_data_path) and len(os.listdir(phoneme_data_path)) > 0

def _trained_phoneme_vocoder(self, mel_spec):
    """è¨“ç·´æ¸ˆã¿äº”åéŸ³ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ãŸãƒœã‚³ãƒ¼ãƒ€ãƒ¼ï¼ˆå°†æ¥å®Ÿè£…ï¼‰"""
    measured_phonemes = self._load_measured_phoneme_features()
    return self._synthesize_with_measured_features(mel_spec, measured_phonemes)
```

---

## ğŸ”— é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

- **ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: [AudioOpt Repository](https://github.com/miyakawa2449/AudioOpt)
- **ç’°å¢ƒæ§‹ç¯‰**: `environment.yml`
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª¬æ˜**: `README.md`
- **å®Ÿè£…ã‚³ãƒ¼ãƒ‰**: `src/core/voice_cloner.py` (ã‚¯ãƒªãƒ¼ãƒ³ç‰ˆ)
- **å‰æ—¥ã®ä½œæ¥­**: `Reports/2025-06-12.md`

---

*Generated on 2025-06-13 | AudioOpt Voice Cloning Project*